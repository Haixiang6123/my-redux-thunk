{"version":3,"sources":["lib/redux-thunk.js","example/store.js","example/UserInfo.jsx","example/App.jsx","index.js"],"names":["createThunkMiddleware","extraArgs","dispatch","getState","next","action","thunkMiddleware","withExtraArgs","initState","userInfo","id","name","count","store","createStore","state","type","payload","applyMiddleware","fetchUserById","env","console","log","Promise","resolve","setTimeout","newUserInfo","UserInfo","useDispatch","useSelector","useState","loading","setLoading","setId","onClick","a","value","onChange","e","target","App","ReactDOM","render","document","getElementById"],"mappings":"8KAAA,SAASA,EAAsBC,GAC7B,OAAO,gBAAEC,EAAF,EAAEA,SAAUC,EAAZ,EAAYA,SAAZ,OAA0B,SAACC,GAAD,OAAU,SAACC,GAC1C,MAAsB,oBAAXA,EACFA,EAAOH,EAAUC,EAAUF,GAG7BG,EAAKC,MAIhB,IAAMC,EAAkBN,IAExBM,EAAgBC,cAAgBP,EAEjBM,QCXTE,EAAY,CAChBC,SAAU,CACRC,GAAI,EACJC,KAAM,IAERC,MAAO,GAoBMC,EANDC,aAXE,WAAgC,IAA/BC,EAA8B,uDAAtBP,EAAWH,EAAW,uCAC7C,OAAQA,EAAOW,MACb,IAAK,WACH,OAAO,2BAAID,GAAX,IAAkBN,SAAUJ,EAAOY,UACrC,IAAK,YACH,OAAO,2BAAIF,GAAX,IAAkBH,MAAOP,EAAOY,UAClC,QACE,OAAOF,KAMXP,EACAU,YAAgBZ,EAAgBC,cAAc,iB,uCCrB1CY,EAAgB,SAACT,GAAD,OAAQ,SAACR,EAAUC,EAAUiB,GAGjD,OAFAC,QAAQC,IAAI,2BAAQF,GAEb,IAAIG,SAAQ,SAAAC,GACjBC,YAAW,WACT,IAAMC,EAAc,CAClBhB,GAAIA,EACJC,KAAMD,EAAK,sBAGPK,EAAQZ,IAEdD,EAAS,CAACc,KAAM,WAAYC,QAASS,IACrCxB,EAAS,CAACc,KAAM,YAAaC,QAASF,EAAMH,MAAQ,IAEpDY,EAAQE,KACP,UAuCQC,EAnCE,WACf,IAAMzB,EAAW0B,cAEjB,EAA0BC,aAAY,SAAAd,GAAK,OAAIA,KAAxCN,EAAP,EAAOA,SAAUG,EAAjB,EAAiBA,MAEjB,EAA8BkB,oBAAS,GAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAoBF,mBAAS,IAA7B,mBAAOpB,EAAP,KAAWuB,EAAX,KAEMC,EAAO,uCAAG,sBAAAC,EAAA,6DACdH,GAAW,GADG,SAER9B,EAASiB,EAAcT,IAFf,OAGdsB,GAAW,GAHG,2CAAH,qDAMb,OACE,gCACE,gCACE,uBAAOI,MAAO1B,EAAI2B,SAAU,SAAAC,GAAC,OAAIL,EAAMK,EAAEC,OAAOH,UAChD,wBAAQF,QAASA,EAAjB,4BAGF,qDAAStB,EAAT,aAGEmB,EAAU,wDACR,gCACE,qCAAQtB,EAASC,MACjB,uCAAUD,EAASE,eCtChB6B,MARf,WACE,OACE,cAAC,IAAD,CAAU3B,MAAOA,EAAjB,SACE,cAAC,EAAD,OCJN4B,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.0b2a7583.chunk.js","sourcesContent":["function createThunkMiddleware(extraArgs) {\n  return ({dispatch, getState}) => (next) => (action) => {\n    if (typeof action === 'function') {\n      return action(dispatch, getState, extraArgs)\n    }\n\n    return next(action)\n  }\n}\n\nconst thunkMiddleware = createThunkMiddleware()\n\nthunkMiddleware.withExtraArgs = createThunkMiddleware\n\nexport default thunkMiddleware\n","import {applyMiddleware, createStore} from 'redux'\nimport thunkMiddleware from \"../lib/redux-thunk\";\n\nconst initState = {\n  userInfo: {\n    id: 0,\n    name: '',\n  },\n  count: 0,\n}\n\nconst reducer = (state = initState, action) => {\n  switch (action.type) {\n    case 'SET_USER':\n      return {...state, userInfo: action.payload}\n    case 'SET_COUNT':\n      return {...state, count: action.payload}\n    default:\n      return state\n  }\n}\n\nconst store = createStore(\n  reducer,\n  initState,\n  applyMiddleware(thunkMiddleware.withExtraArgs('development'))\n)\n\nexport default store\n","import React, {useState} from 'react'\nimport {useDispatch, useSelector} from 'react-redux'\n\n// 根据 Id 获取 userInfo\nconst fetchUserById = (id) => (dispatch, getState, env) => {\n  console.log('当前环境', env)\n\n  return new Promise(resolve => {\n    setTimeout(() => {\n      const newUserInfo = {\n        id: id,\n        name: id + '号技师'\n      }\n\n      const state = getState()\n\n      dispatch({type: 'SET_USER', payload: newUserInfo})\n      dispatch({type: 'SET_COUNT', payload: state.count + 1})\n\n      resolve(newUserInfo)\n    }, 1000)\n  })\n}\n\nconst UserInfo = () => {\n  const dispatch = useDispatch()\n\n  const {userInfo, count} = useSelector(state => state)\n\n  const [loading, setLoading] = useState(false)\n  const [id, setId] = useState('')\n\n  const onClick = async () => {\n    setLoading(true)\n    await dispatch(fetchUserById(id))\n    setLoading(false)\n  }\n\n  return (\n    <div>\n      <div>\n        <input value={id} onChange={e => setId(e.target.value)}/>\n        <button onClick={onClick}>getUserInfo</button>\n      </div>\n\n      <p>已搜索: {count} 次</p>\n\n      {\n        loading ? <div>加载中...</div> : (\n          <div>\n            <p>Id: {userInfo.id}</p>\n            <p>Name: {userInfo.name}</p>\n          </div>\n        )\n      }\n    </div>\n  )\n}\n\nexport default UserInfo\n","import {Provider} from 'react-redux'\nimport React from 'react'\nimport store from './store'\nimport UserInfo from './UserInfo'\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <UserInfo/>\n    </Provider>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './example/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}